<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 10px;
      }
      h2 {
        margin-top: 0;
      }
      button {
        margin: 5px 0;
        padding: 8px 12px;
        width: 100%;
        border: none;
        background: #4285F4;
        color: white;
        border-radius: 4px;
        cursor: pointer;
      }
      button:hover {
        background: #3367D6;
      }
    </style>
  </head>
  <body>
    <h2>Sudoku Sidebar</h2>
    <h3>H∆∞·ªõng d·∫´n</h3>
    <ul>
      <li>B·∫£ng Sudoku g·ªìm 9x9 √¥, chia th√†nh 9 v√πng 3x3.</li>
      <li>ƒêi·ªÅn s·ªë t·ª´ 1 ƒë·∫øn 9 v√†o c√°c √¥ tr·ªëng.</li>
      <li>M·ªói h√†ng, m·ªói c·ªôt v√† m·ªói v√πng 3x3 ch·ªâ ƒë∆∞·ª£c ch·ª©a m·ªói s·ªë duy nh·∫•t m·ªôt l·∫ßn.</li>
    </ul>

    <button onclick="startGame()">T·∫°o m√†n ch∆°i</button>
    <button onclick="google.script.run.showSudokuAnswerDialog()">ƒê√°p √°n</button>
    <button onclick="google.script.run.showSudokuHintDialog()">G·ª£i √Ω</button>

    <!-- Th√¥ng b√°o ngay d∆∞·ªõi n√∫t G·ª£i √Ω -->
    <div id="win-message" style="margin-top:10px; font-weight:bold; color:green;"></div>

    <script>
      function startGame() {
        google.script.run
          .withFailureHandler(function(err){
            alert("L·ªói khi t·∫°o v√°n: " + (err && err.message ? err.message : err));
          })
          .startNewSudoku();
        document.getElementById("win-message").innerText = "";
      }

      function showWinMessage() {
        document.getElementById("win-message").innerText =
          "üéâ Ch√∫c m·ª´ng! B·∫°n ƒë√£ ho√†n th√†nh m√†n ch∆°i!";
      }

      function hideWinMessage() {
        document.getElementById("win-message").innerText = "";
      }

      // Polling tr·∫°ng th√°i Sudoku li√™n t·ª•c
      setInterval(function(){
        google.script.run
          .withSuccessHandler(function(status){
            if (status === "win") {
              showWinMessage();
            } else {
              hideWinMessage();
            }
          })
          .checkSudokuStatus();
      }, 2000); // ki·ªÉm tra m·ªói 2 gi√¢y
    </script>
  </body>
</html>
